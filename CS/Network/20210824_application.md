어플리케이션 계층은 **웹이나 이메일과 같은 서비스를 제공**하는 계층으로 **사용자가 직접 사용하며 체감**할 수 있는 계층입니다. 각 서비스는 자신만의 독자적인 프로토콜을 가지고 있습니다. 네트워크 계층 모델 중 트랜스포트 이하의 계층들은 데이터 전송을 담당하고 있으므로 이들 데이터 전송 관련 계층을 제외한 모든 영역이 애플리케이션 계층의 범주하고 보면 됩니다.

> **사용자가 직접 사용하는 프로토콜**

1.  HTTP : 웹 클라이언트와 웹 서버 사이에서 웹 페이지 데이터를 주고 받습니다.
2.  POP, SMTP, IMAP : 메일을 송수신하고 보관합니다.
3.  SMP, AFP : LAN 을 통해 파일을 공유합니다.
4.  FTP : 서버를 통해 파일을 주고 받습니다.
5.  Telnet, SSH : 원격에서 서버를 제어합니다.

> **사용자가 간접적으로 사용하는 프로토콜**

사용자가 직접적으로 사용하지 않아서 체감하지 못하는 프로토콜들도 있습니다. 이러한 프로토콜들은 OS, 다른 응용 계층의 프로토콜들이 간접적으로 사용합니다.

1.  DNS : 도메인 Name 과 IP 주소의 정보를 서로 변환 시 사용합니다.
2.  DHCP : 처음으로 부팅한 컴퓨터에게 IP 주소를 할당할 때 사용합니다.
3.  SSL/TLS : 통신 데이터를 암호화하여 주요 정보를 안전하게 주고 받을 때 사용합니다.
4.  NTP : 네트워크에 연결된 장비들의 시스템 시간을 동기화할 때 사용합니다.
5.  LDAP : 네트워크에 연결된 자원의 통합관리에 필요한 디렉터리 서비스를 제공할 때 사용합니다.

---

> **HTTP(Hyper Text Transfer Protocol)**

클라이언트와 서버 간에 요청과 응답으로 월드 와이드 웹 상에서 정보(데이터)를 주고 받을 때 주로 사용하는 프로토콜입니다.

well-known **포트 80**으로 TCP 를 사용합니다. HTTP는 별도의 제어 연결 없이, 데이터만 클라이언트와 서버사이에 전송됩니다.

> **HTTP 특징**

-   HTTP 메시지는 사람이 읽을 목적으로 전달되지 않고, HTTP 서버와 클라이언트에 의해 읽혀지고 해석됩니다.
-   월드와이드 웹(WWW)에서 데이터를 액세스하는데 사용되는 프로토콜로 **TCP/IP** 서비스를 사용합니다.
-   TCP를 이용하지만 HTTP 자체는 **stateless** 프로토콜 입니다. 즉, 클라이언트에 대한 정보는 서버에 저장되어 있지 않다는 뜻이며 통신 시 정보를 한 번씩 주고 받은 후 연결을 끊습니다.
-   서버는 응답을 전송한 후에 차후의 요청을 위해 연결을 열어놓은 상태로 유지하는 **영속적 연결**을 기본으로 규정합니다.

> **HTTP 메시지**

![1](https://user-images.githubusercontent.com/63203480/130488335-9a7716f8-3048-4c70-8047-fa2d30e9b8de.PNG)

[사진 출처](https://deepwelloper.tistory.com/entry/HTTP-%EB%A9%94%EC%8B%9C%EC%A7%80-%EA%B5%AC%EC%A1%B0%EC%99%80-%ED%95%A8%EA%BB%98-HTTP-%ED%94%84%EB%A1%9C%ED%86%A0%EC%BD%9C-%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0)

통신 과정에서 주고 받는 정보들을 HTTP 메시지라고 부르며, 요청과 응답의 2가지 형태로 구분됩니다.

HTTP 메시지의 형태는 아래와 같습니다.

-   Start Line(Request/Response Line) : Method, URL, Version 3가지의 필드로 메시지의 종류나 상태, 유형을 정의합니다.
-   Header Line : 메시지에 대한 상세한 정보가 포함되어 있습니다.
-   Blank Line : 요청에 대한 모든 메타 정보가 전송되었음을 알립니다.
-   Body : 요청 일 경우 송신할 설명을 포함하고, 응답인 경우 서버로부터 클라이언트로 전송되는 데이터를 포함합니다. 응답이 오류 메시지가 아니면 Body는 존재합니다.

> **URL 과 HTTP 요청, 응답**

특정 데이터를 받기 위해서는 **HTTP 요청**을 보내야 하는데 이때 **URL**이라는 문자열을 사용합니다.

> https://www.choidr.tistory.com/entry/index.html 

-   https(스키마) : 사용하는 프로토콜을 명시합니다.
-   www(호스트) : 서버의 이름이나 역할을 명시합니다.
-   choidr.tistory.com(도메인) : 서버를 운영하는 조직을 명시합니다.
-   entry(디렉터리) : 서버 내의 디렉터리를 명시합니다.
-   index.html(파일) : 해당 디렉터리 내의 파일을 명시합니다.

**\- HTTP 요청**

![2](https://user-images.githubusercontent.com/63203480/130488395-e1f648fd-4f13-4ef5-9bb5-cb8e0f7e7d14.PNG)

사진 출처: [https://developer.mozilla.org/ko/docs/Web/HTTP/Messages](https://developer.mozilla.org/ko/docs/Web/HTTP/Messages)

-   ```POST /entry/index.html HTTP/1.1``` : POST 뒤에 디렉터리와 파일명, 프로토콜 버전 정보가 뒤따릅니다.
-   ```HOST: www.choidr.tistory.com``` : 웹 서버 정보가 들어갑니다.
-   나머지 헤더 : 이후 정보들은 웹 브라우저에 관한 정보가 들어갑니다.
-   메세지 바디 : GET 요청인 경우에는 별도의 요청 내용인 메시지 바디가 없습니다.

**\- HTTP 응답**

![3](https://user-images.githubusercontent.com/63203480/130488454-b5b63df4-7611-477e-b374-a91b4a3b8880.png)

-   Response Header(```HTTP/1.1 200 OK```) : 상태 정보가 들어갑니다.
-   Header(Date...) : 파일 갱신 날짜나 크기와 같은 정보가 들어갑니다.
-   Blank Line : 요청에 대한 모든 메타 정보가 전송되었음을 알립니다.
-   Message Body : 데이터의 내용이 들어갑니다.

HTTP 메소드에 대한 내용은 [해당 링크](https://choidr.tistory.com/entry/HTTP-Method-%EB%B0%A9%EC%8B%9D?category=1017005) 에 정리해놨습니다.

> HTTP 상태 코드

-   1XX : Information responses
-   2XX : Successful responses
-   3XX : Redirection messages
-   4XX : Client Error
-   5XX : Server Error

---

> **쿠키와 세션**

HTTP 는 상태가 없는 무상태 프로토콜 개체로 설계되었습니다. 따라서 클라이언트가 요청을 보내고, 서버는 응답하고 이것으로 관계는 끝이납니다.

따라서 온라인 쇼핑몰에서 상품 선택을하고, 구입을 결정 한 후에 결제 화면으로 이동하는 것과 같이 여러 단계의 흐름을 처리 할 때는 각 요청이 동일한 사용자가 보낸 것인지 다른 사용자가 보낸 것인지 판단하지 못합니다. 이런 경우 여런 건의 요청처리를 **동일한 사용자 접속 세션으로 인식할 수 있도록 쿠키를 사용**합니다.

이러한 쿠키 세션방식은 HTTP 의 특징이자 약점을 보완하기 위해서 사용합니다.

> **쿠키의 생성과 저장**

1. 서버가 클라이언트로부터 요청을 받았을 때, 클라이언트에 관한 정보를 파일이나 문자열로 저장합니다. 정보에는 클라이언트의 도메인 네임, 쿠키 생성에 필요한 내용(이름, 번호 등..), 타임스탬프 등의 포함됩니다.


2. 서버 크키를 생성하여 클라이언트에게 보내는 응답에 쿠키를 포함하여 전송합니다.


3. 클라이언트가 응답을 받으면, 브라우저는 쿠키를 도메인 서버 이름으로 정렬되는 **쿠키 디렉토리에 저장**합니다.

- 유출되었을 때 보안 문제가 생길 만한 정보는 클라이언트 PC의 쿠키에 저장하면 안됩니다. **각종 정보들은 서버에 저장하는 것이 원칙**이고 동일한 사용자인지 확인하기 위한 세션ID 등의 식별 정보만 클라이언트에 쿠키로 저장하도록 제한해야 합니다.

> **쿠키 사용**

![4](https://user-images.githubusercontent.com/63203480/130488595-9360fa69-e10f-4cab-a1f8-4ee6f04d05b1.png)

사진 출처: [https://interconnection.tistory.com/74](https://interconnection.tistory.com/74)

클라이언트가 서버에게 요청을 보낼 때, 쿠키 디렉터리를 검색하여 서버가 보낸 쿠키를 찾습니다. 만일 있다면 쿠키를 요청에 포함하여 전송합니다. 이렇게 된다면 서버가 요청을 받았을 때 새로운 요청이 아닌 기존 클라이언트라는 것을 알 수 있게 됩니다.

---

> **Peer-to-peer(P2P)**

![5](https://user-images.githubusercontent.com/63203480/130488633-eac3df1d-9f3b-42b5-855b-551f58ccc52a.png)

개인 컴퓨터에 공유 디렉토리를 만든 후 그 안에 공유할 파일을 저장하여 여러 사람이 활용할 수 있도록 만드는 서비스 입니다.

클라이언트가 오디오나 비디오 파일과 같은 대용량 파일을 전송하려고 하여 서버 장치에 많은 부하를 야기하는 파일 전송 등을 수행할 때 장점이 있습니다.

P2P는 각각의 컴퓨터가 클라이언트가 될 수 있고, 또 다른 순간에는 서버도 될 수 있습니다. 특별히 공유를 위한 서버를 별도로 준비할 필요가 없고 공유할 컴퓨터끼리 네트워크에 접속하기만 하면 됩니다.