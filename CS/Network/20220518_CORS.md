# CORS(Cross-Origin Resource Sharing) - 교차 출처 리소스 공유
CORS 란 도메인이 다른 자원에 리소스를 요청할 때 접근에 대한 권한을 부여하는 보안 정책이다.      
이것을 이해하기 위해서는 Same Origin Policy(동일 출처 정책) 을 아는 것도 중요하다.

### Same Origin Policy(동일 출처 정책)
두 URL 의 프로토콜(HTTP, HTTPS...), 포트(80, 81...), 호스트(test.shop.com, ...) 가 모두 같아야 동일한 출처 라고 합니다.   
즉, 동일 출처 정책은 웹의 보안을 위해 **프로토콜, 호스트, 포트가 동일한 서버로만 요청을 주고 받을 수 있는 정책**입니다.

![cors_principle](https://user-images.githubusercontent.com/63203480/169098469-432213fa-61ce-4626-a684-222444087d5d.png)

위의 사진에서보면 ```domain-a.com``` 클라이언트에서 ```domain-a.com``` 서버에 요청을 하는 것은 동일 출처 정책을 지킨 것입니다.    
하지만 ```domain-a.com``` 클라이언트에서 ```domain-b.com``` 서버에 요청을 했을 때는 동일 출처 정책을 위반했기에 CORS 설정이 필요합니다.

또한 8080 포트를 사용하고 있는 클라이언트에서 
3000 번대를 사용하고 있는 서버에게 요청을 보내면 어떻게 될까요?    
포트번호가 달라 같은 도메인(Origin)으로 요청을 보낸 것이 아니기 때문에 동일 출처 정책에 의해 에러를 맞이하게 됩니다.

개발하다보면 클라이언트와 서버를 분리해서 사용하기도 하고, 외부 API 를 사용하기에 위와 같은 정책으로 인해 불편함을 겪게 됩니다.   
이를 해결하기 위한 방법이 **CORS** 입니다.

동일 출처 정책을 해결하기 위한 방법으로 도메인의 출처가 다른 요청이라도 서버 단에서의 접근을 허용할 수 있게 해주는 것입니다.   

```typescript
app.enableCors({
    origin: ['https://example.com'],
    //...
});
```

위의 코드는 NestJS 에서의 Cors 설정 예제의 일부입니다.  
즉, ```https://example.com``` 도메인의 접근을 허가한다는 것입니다.
