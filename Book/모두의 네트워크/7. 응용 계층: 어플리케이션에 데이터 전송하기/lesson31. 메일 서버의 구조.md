# lesson31. 메일 서버의 구조(SMTP와 POP3)

## 1. 메일의 송수신 구조

- 메일은 보내는데 사용하는 프로토콜은 SMTP 이고, 메일을 받을 때 사용하는 프로토콜은 POP3 이다. 그리고 각각 포트번호는 25번, 110번을 사용한다.
- 메일을 송수신을 아래와 같이 사용된다. 주로, 메일 서비스를 제공하는 포털 사이트나 회사의 메일 서버를 사용한다. 그래서 메일을 전송할 때는 메일 서비스를 제공하는 포털 사이트나 회사 메일 서버에 메일을 보내고 이것이 SMTP server 이다.

  ![Untitled123](https://github.com/choidoorim/TIL/assets/63203480/b022a64d-640f-4661-bbe3-4dda3f843ba4)

    1. 송신 측 컴퓨터는 SMTP 프로토콜을 사용하여 SMTP 메일 서버에게 메일을 보낸다.
    2. SMTP 프로토콜을 사용하여 SMTP 메일 서버에서 POP 메일 서버로 메일을 보낸다.
    3. POP3 프로토콜을 사용해서 POP 메일 서버에서 메일 데이터를 수신측 컴퓨터에게 보낸다.

## 2. SMTP 에 의한 메일 송신과 메일 전송

- 메일 전송을 하면 컴퓨터의 메일 프로그램에서는 SMTP 를 사용해서 SMTP 메일 서버에 메일을 보낸다.
- 컴퓨터와 SMTP 메일 서버 간에 일어나는 메일 교환 동작 흐름은 아래와 같다.
    1. 세션 시작을 통지한다.
    2. 송신자의 메일 주소를 통지한다.
    3. 목적지 메일 주소를 통지한다.
    4. 메일 본문 전송을 통지한다.
    5. 메일 본문을 송신한다.
    6. 세션 종료를 통지한다.

## 3. POP3에 의한 메일 수신

- SMTP, POP Server 와 같은 메일 서버에는 메일 박스라고 하는 메일 보관 기능이 있다. POP 메일 서버는 POP3 프로토콜을 사용해서 메일 박스에서 메일을 가져와서 송신 측 컴퓨터에 전송한다.

  ![asd](https://github.com/choidoorim/TIL/assets/63203480/293c581d-a529-4e29-9d17-81400d8bfe87)

- 수신측 컴퓨터에서 메일을 받아갈 때는 아래와 같은 사용자 인증 과정이 필요하다.
    1. 세션 시작을 통지한다.
    2. 수신자의 사용자 이름을 통지한다.
    3. 수신자의 비밀번호를 통지한다.
    4. 메일을 확인한다.
    5. 메일박스에 보관된 메일을 전송받는다.
    6. 세션 종료를 통지한다.

## Ping 명령어

- ping 명령어는 ICMP(Internet Control Message Protocol) 를 사용해서 목적지 컴퓨터에 ICMP 패킷을 전송하고 패킷에 대한 응답이 제대로 오는지 확인하는 명령이다.
