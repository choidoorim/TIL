# lesson8. 캡슐화와 역캡슐화

## 1. 캡슐화와 역캡슐화

- 데이터를 보내기 위해서는 데이터 앞부분에 전송하는데 필요한 정보를 붙여서 다음 계층으로 보내야 한다. 이 정보를 헤더라고 하고, 헤더에는 데이터를 전달받아야 하는 상대방에 대한 정보도 포함되어 있다. 이렇게 헤더를 붙이는 것을 캡슐화라고 한다. 그리고 데이터를 받는 쪽에서 헤더를 하나씩 제거하는 것을 역캡슐화라고 한다.

  ![csg25-02-osi-encapsulation](https://user-images.githubusercontent.com/63203480/235930054-cbd9ba3b-171d-4e54-851a-583d13b459b5.png)

- 각 계층마다 신뢰할 수 있는 통신을 하기 위해 계층마다 헤더를 추가한다(캡슐화). Data Link 계층에서는 다른 계층과 다르게 헤더와 트레일러를 붙인다. 트레일러란 데이터를 전달할 때 데이터의 마지막에 추가하는 정보이다. 최종적으로 Data Link 계층에서 만들어진 데이터는 전기신호로 변환되어 수신측에 전달된다.
- 수신 측에서는 데이터를 확인하기 위해서 계층별로 헤더를 제거한다(역캡슐화). Data Link 계층에서는 헤더와 트레일러를 제거한다. 모든 헤더가 제거되면 수신측에 최종적으로 데이터가 도착하게 된다.

## 2. VPN

- Virtual Private Network(가상 사설망)의 약자로 가상 통신 터널을 만들어서 기업 본사나 지사와 같은 거점을 연결하여 **외부에서 인터넷으로 사내에 접속**하는 것이다.
- VPN 은 인터넷 VPN 과 IP-VPN 2 가지 종류가 있다.
- 인터넷 VPN은 거점 간 접속과 원격 접속 연결이 있다. 두개 모두 일반 인터넷망으로 사용한다. 거점 간 접속은 IPSec 이라는 암호 기술 프로토콜을 사용하여 접속한다. 원격 접속은 외부에서 사용하는 컴퓨터와 사내 네트워크를 연결하기 때문에 암호화된 통신로를 만든다. 인터넷 망을 통해 데이터를 전송하기 때문에 중간에 데이터를 가로채서 해킹하거나, 변조할 수 있는 가능성이 있다.
- IP-VPN은 MPLS(Multi-Protocol Label Switching) 라는 기술을 사용하여 인터넷망이 아닌, 통신 사업자 전용 폐쇠망, 전용 회선을 사용한다. MPLS 는 전용 폐쇠망/회선을 사용하기 때문에 제 3자에 의한 해킹이나 데이터 변조의 위험이 없기에 암호화기능이 필요하지 않다.
    - MPLS 가 제 3자에 의한 해킹이나 데이터 변조의 위험이 없는 이유: MPLS 기술이 패킷 전송 경로를 미리 정의하고, 해당 경로를 따라 패킷을 전송하기 때문입니다. 이로 인해, 경로 외부에서의 데이터 변조나 해킹이 발생해도 패킷이 정상적인 경로를 따라 전송되므로 제 3자는 해당 패킷을 캡처하거나 조작하는 것이 불가능해집니다.
