# lesson33. 스위치와 라우터에서의 데이터 전달과 처리

## 1. 스위치에서의 데이터 전달과 처리

- 스위치는 OSI 모델의 물리 계층과 데이터링크 계층으로만 이뤄져있다.
- 스위치는 데이터링크 계층의 데이터를 받아서 전기신호로 변환하여 라우터로 전송한다.

  ![6](https://github.com/choidoorim/TIL/assets/63203480/151f893c-72b9-4f94-9e43-e77bad810f7e)

## 2. 라우터에서의 데이터 전달과 처리

![5](https://github.com/choidoorim/TIL/assets/63203480/603cfe65-609e-41e6-ad3e-aff88ee44f49)

- 라우터는 OSI 모델의 물리 계층, 데이터링크 계층, 네트워크 계층으로 이뤄져 있다.
- 스위치A에서는 컴퓨터에게 받은 데이터를 계층별로 역캡슐화한다. 데이터 링크계층에서는 목적지 MAC 주소와 자신의 MAC 주소를 비교한 뒤, 다시 데이터를 캡슐화하여 전기신호를 라우터A에게 전달한다.
- 라우터A에서는 스위치에게 받은 전기신호 데이터를 계층별로 역캡슐화한다. 데이터 데이터 링크계층에서는 목적지 MAC 주소와 자신의 MAC 주소를 비교하고, 네트워크 계층에서는 자신의 라우팅 테이블과 목적지 IP 주소를 비교한다. 라우팅 테이블에서 목적지 IP 주소의 경로를 알 수 있으므로 라우팅이 가능하다. 그리고 출발지 IP 주소를 라우터A의 외부주소(`172.16.0.1`)로 변경한다. 그리고 캡슐화를 하여 라우터B 에게 데이터를 보낸다.
- 라우터B에서도 라우터A와 동일하게 데이터를 계층별로 역캡슐화를 한다. 네트워크 계층에서는 자신의 라우팅 테이블과 목적지 IP 주소를 비교한다. 그리고 출발지 IP 주소를 라우터B의 내부주소(`192.168.10.1`)로 변경한다. 그리고 스위치B에게 전달되도록 캡슐화하여 네트워크에 전달한다.
- 스위치B에서는 전달받은 전기신호 데이터를 스위치A와 동일하게 데이터 링크계층에서 처리한 뒤(역캡슐화 + 캡슐화), 웹 서버에 전달한다.
