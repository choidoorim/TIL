# 2.1 MySQL 서버 설치
- 리눅스의 RPM 이나 운영체제별 인스톨러를 이용하는 것이 좋다.

## 2.1.1 버전과 에디션(엔터프라이즈와 커뮤니티) 선택
- 새로운 메이저 버전을 선택할 때 15~20 번 정도의 Release 된 버전을 선택하는 것이 안정적인 서비스에 도움이 된다(MySQL 8.0 버전일 경우 MySQL 8.0.15 ~ 8.0.20 버전부터 시작하는 것을 권장).
- MySQL 엔터프라이즈 에디션과 커뮤니티 에디션의 핵심 기능은 거의 차이가 없고, 부가적인 기능과 서비스들만 엔터프라이즈 에디션에서만 지원된다.

# 2.2 MySQL 서버의 시작과 종료
- 트랜잭션 로그 파일이나 시스템 테이블이 준비되지 않는다면 MySQL 서버를 시작할 수 없다.
- `mysqld --default-file=/etc/my.cnf --initialize=insecure` 명령을 통해 비밀번호가 없는 관리자계정인 root 유저를 생성할 수 있다. 비밀번호를 가진 root 유저를 만들고 싶다면 `--initialize` 옵션을 사용하면 된다.
- RPM 패키지로 MySQL 을 설치했다면 자동으로 `/usr/lib/system/mysqld.service` 파일이 생성되고, `systemctl` 유틸리티를 이용해 MySQL 시작 및 종료가 가능하다. 
	- `systemctl start mysqld` : MySQL 시작
	- `sysyemctl status mysqld` : MySQL 서버의 상태를 확인
	- `sysyemctl stop mysqld` : MySQL 종료
- SHUTDOWN 명령을 통해 MySQL 서버를 셧다운할 수 있다. mysql 에 로그인 후에 명령을 실행하면 된다. 
- 사용량이 많은 MySQL 에서 실제 트랜잭션이 정상적으로 커밋되어도 데이터 파일에 적용되지 않고 로그 파일에만 기록되는 경우가 있다. MySQL 이 종료될 때 모든 Commit 된 내용들을 데이터 파일에 기록하고 종료하게 할 수도 있는데 **MySQL 서버의 옵션을 변경하고 MySQL 서버를 종료**하면 된다. 그리고 이것을 클린 셧다운 이라고 한다.
```
mysql> SET GLOBAL innodb_fast_shutdown=0;
linux> systemctl stop mysqld.service

## 원격으로 종료시
mysql> SET GLOBAL innodb_fast_shutdown=0;
mysql> SHUTDOWN;
```

## 2.2.3 서버 연결 테스트
- MySQL 기본 클라이언트 프로그램인 mysql 을 실행하여 접속을 할 수 있다. 기본 값으로는 호스트는 localhost이고 소켓 파일을 사용한다. 소켓 파일의 위치는 MySQL 서버의 설정 파일에서 읽어서 사용한다.
```
1. MySQL 소켓파일 linux> mysql -uroot -p --host=localhost --socket=/tmp/mysql.sock
2. 원격 호스트 linux> mysql -uroot -p --host=127.0.0.1 --port=3306
3. 기본 값 linux> mysql -uroot -p
```
- `show databases;` 명령을 통해 데이터베이스 목록을 확인할 수 있다.

# 2.3 MySQL 서버 업그레이드
- MySQL 서버를 업그레이드 하는 방법은 **데이터 파일을 두고 그대로 업그레이드 하는 방법(인플레이스 업그레이드)** 과 `mysqlddump` 도구를 이용해 **MySQL서버의 데이터를 SQL 문장이나 텍스트 파일로 덤프한 후, 새로 업그레이드된 버전의 MySQL 서버에서 덤프된 데이터를 적재하는 방법(논리적 업그레이드)** 이 있다.
- 인플레이스 업그레이드는 여러 가지 제약사항이 있지만 시간이 단축되는 장점이 있고, 논리적 업그레이드는 제약 사항이 거의 없지만 시간이 오래 걸린다는 단점이 있다.

## 2.3.1 인플레이스 업그레이드 제약 사항
