# 13-1. 교착 상태란

## 식사하는 철학자 문제

![Untitled](https://s3-us-west-2.amazonaws.com/secure.notion-static.com/00a56571-5bd9-4196-bbca-aae8f489aae6/Untitled.png)

- 일어나지 않을 사건을 기다리며 진행이 멈춰 버리는 현상을 교착 상태(deadlock) 이라고 한다.
- 교착 상태가 발생했을 때는 상황을 정확히 표현해 보고, 교착 상태가 일어나는 근본적인 이유에 대해서 알아야 한다.

## 자원 할당 그래프

![philtable](https://github.com/choidoorim/programing-books/assets/63203480/3a703434-a7d8-47af-b162-cfb0080cd6e4)

- 교착 상태는 자원 할당 그래프로 표현할 수 있다. 어떤 프로세스가 어떤 자원을 사용하고 있고, 어떤 프로세스가 어떤 자원을 기다리고 있는지를 표현하는 그래프이다.
- 프로세스는 원으로, 자원의 종류는 **사각형**으로 그린다.
- 사용할 수 있는 **자원의 개수**는 자원 사각형 내에 **점으로 표현**한다.
- 프로세스가 **자원을 할당받아 사용중**이라면 **자원에서 프로세스로 화살표**를 표시한다.
- 프로세스가 **어떤 자원을 기다리고 있다면** **프로세스에서 자원으로 화살표를 표시**한다.

## 교착 상태 발생 조건

- 교착 상태가 발생하는 상황으로는 상호 배제, 점유와 대기, 비선점, 원형 대기가 있다. 4 가지 상황이 모두 만족하는 경우에 교착 상태가 발생할 가능성이 생긴다.

### 상호 배제(mutual exclusion)

- 한 프로세스가 사용하는 자원을 다른 프로세스가 사용할 수 없을 때인 상호 배제 상황에서 교착 상태가 발생할 수 있다.

### 점유와 대기(hold and wait)

![1607336378-71449](https://github.com/choidoorim/programing-books/assets/63203480/4452db08-ac29-4b5b-851a-a03d04a65d24)

- 프로세스가 **어떠한 자원을 할당 받은 상태에서 다른 자원을 할당 받기를 기다리는** 점유와 대기 상태일 경우 교착 상태가 발생할 수 있다.

### 비선점(nonpreemptive)

- 어떤 프로세스도 다른 프로세스의 자원을 강제로 빼앗지 않는 비선점을 하기 때문에 교착 상태가 발생할 수 있다.

### 원형 대기(circular wait)

![deadlock](https://github.com/choidoorim/programing-books/assets/63203480/faf8071e-45a5-487f-947e-016b9337f77a)

- 자원 할당 그래프가 원의 형태로 그려져 자원을 대기하는 것을 원형 대기라고 한다. 그리고 원형 대기 상태일 경우 교착 상태가 발생할 수 있다.
