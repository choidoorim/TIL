# 14-1. 연속 메모리 할당

- 프로세스에 연속적인 메모리 공간을 할당하는 방식을 연속 메모리 할당 방식이라고 한다.

## 스와핑

![Untitled2](https://github.com/choidoorim/programing-books/assets/63203480/98f4b6ab-fb8f-4444-b957-2f4b6fd11a65)

- 메모리에 적재되어 있는 프로세스들 중에 대기 상태의 프로세스라던지, 오랫동안 사용되지 않는 프로세스 등 현재 실행되고 있지 않는 프로세스가 있을 수 있다. 이런 프로세스들을 임시 보조기억 장치의 일부 영역으로 쫒아내고, 그렇게 생긴 메모리 빈 공간에 또 다른 프로세스를 적재하는 방식을 스와핑(swapping) 이라고 한다.
- 일부 프로세스가 메모리에서 쫒겨 나가는 보조기억 장치의 영역을 스왑 영역(swap space)이라고 한다.
- 현재 실행되지 않는 프로세스가 메모리에서 스왑영역으로 옮겨지는 것을 스왑 아웃이라고 하고, 스왑 영역에 있던 프로세스가 다시 메모리로 옮겨오는 것을 스왑 인이라고 한다. 스왑 아웃에서 스왑 인되었을 때 전의 물리 주소와 다른 물리 주소에 적재될 수 있다.
- 스와핑을 통해서 프로세스가 요구하는 메모리의 크키보다 실제 메모리 크기가 더 작은 경우에도 보조 기억 장치 영역 일부를 활용하여 프로세스를 동시에 실행할 수 있다.

## 메모리 할당

- 비어있는 메모리 공간에 연속적으로 프로세스를 할당하는 방식 중 대표적으로 최초 적합, 최적 적합, 최악 적합이 있다.

### 최초 적합

- 메모리 내의 빈 공간을 순서대로 검색하다가 빈 공간을 찾으면 순서대로 프로세스를 배치하는 방식이다.
- 프로세스를 적재할 수 있는 메모리를 발견하는 즉시 메모리에 할당하는 방식으로 **검색을 최소화하고, 빠른 할당이 가능**하다.

### 최적 적합

- 운영체제가 모든 빈 공간을 검색해 본 뒤, 프로세스가 적재될 수 있는 가장 작은 메모리 공간부터 프로세스를 배치하는 방식이다.

### 최악 적합

- 운영체제가 모든 빈 공간을 검색해 본 뒤, 프로세스가 적재될 수 있는 가장 큰 메모리 공간부터 프로세스를 배치하는 방식이다.

## 외부 단편화(external fragmentation)

![Untitled](https://github.com/choidoorim/programing-books/assets/63203480/ab02b3bf-3808-452e-8536-d59c1c89742c)

- 연속 메모리 할당은 외부 단편화라는 문제점을 내포하고 있다.
- 프로세스들이 실행되고 종료되는 것을 반복하게 되면 메모리 사이에 빈 공간들이 생긴다. 이런 빈 공간들은 빈 공간이지만 그 공간보다 더 큰 프로세스는 할당할 수 없고, 메모리 낭비로 이어지게 된다. 예를 들어, 메모리 영역 안에 빈 공간이 각각 40KB, 10KB, 5KB 가 있을 때, 50KB 프로세스를 메모리에 할당하려면 불가능하다. 그리고 이러한 현상을 외부단편화라고 한다.
- 외부 단편화를 해결할 수 있는 방법으로는 메모리를 압축(compaction)하는 방법이 있다. 압축은 흩어져 있는 빈 공간을 하나로 모으는 방식으로 메모리 내에 저장된 프로세스를 재배치시켜서 작은 공간들을 큰 공간으로 만드는 방법이다.
- 압축은 여러 가지 단점들을 가지고 있다. 작은 빈 공간들을 하나로 모으는 동안 시스템은 하던 일을 중지해야 하고, 메모리에 있는 많은 내용들을 옮기는 작업이 많은 오버헤드를 야기한다.
- 오늘날 사용되는 압축이 아닌 다른 방법으로 외부 단편화를 해결할 수 있는 방식이 있는데, 가상 메모리 기법 중 페이징 기법이다.
