- 프로그램 실행 전 후로 프로그램 속 명령어와 데이터는 레지스터에 임시저장된다. 
## 반드시 알아야 할 레지스터
- 레지스터들은 CPU 별로 이름, 크기, 종류가 다양하다. 그리고 레지스터들은 각각 역할이 있고, 그마다 저장하는 내용도 다르다. 
- 프로그램 카운터, 명령어 레지스터, 메모리 주소 레지스터, 메모리 버퍼(데이터) 레지스터, 범용 레지스터, 플래그 레지스터, 스택 포인터, 베이스 레지스터 등

![2331184F51EE45C723](https://user-images.githubusercontent.com/63203480/236680139-5d3c2eb1-f3eb-46d7-b230-13705af4fa35.png)

### 1. 프로그램 카운터
- 메모리에서 읽어 들일 **명령어의 주소**를 저장한다. 프로그램 카운터를 명령어 포인터라고 부르기도 한다.
- CPU 에서 메모리의 명령어를 계속해서 실행할 수 있는 이유는 CPU 속에 프로그램 카운터가 계속해서 증가하기 때문이다. 
- 종종 프로그램 카운터가 실행 중인 명령어의 다음 번지 주소가 아닌 다른 값으로 업데이트가 되는 경우가 있는데, 명령어 중 JUMP, CONDITIONAL JUMP, CALL, RET 와 같이 특정 메모리 주소로 실행 흐름을 이동하는 명령어가 실행되었을 때이다. 이 경우에는 프로그램이 차례대로 실행되지 않는다. 
### 2. 명령어 레지스터
- 메모리에서 읽어 들인 **명령어를 저장**한다. 제어장치는 명령어 레지스터 속 명령어를 받아들이고 해석한 뒤 제어 신호를 내보낸다. 
### 3. 메모리 주소 레지스터
 - 메모리의 주소를 저장한다. **CPU 가 읽고자 하는 주소 값을 주소 버스를 통해 보낼 때** 메모리 주소 레지스터를 거친다.
### 4. 메모리 버퍼 레지스터(=메모리 데이터 레지스터)
- 메모리와 주고 받을 값(데이터나 명령어)를 저장한다.
- **메모리에 쓰고 싶은 값이나 메모리로부터 전달받은 값**은 메모리 버퍼 레지스터에 저장된다. 
- 데이터 버스로 주고 받는 값은 메모리 버퍼 레지스터를 거친다. 
### 5. 범용 레지스터
- 일반적인 상황에서 자유롭게 사용될 수 있는 레지스터이다. 메모리 주소 레지스터는 주소만 저장하고, 메모리 버퍼(데이터) 레지스터는 데이터만 저장하지만, 범용 레지스터는 데이터와 주소 모두 저장할 수 있다. 
- CPU 는 한개의 범용 레지스터만 가지고 있는 것이 아닌 여러 개의 범용 레지스터를 가지고 있다. 
### 6. 플래그 레지스터
- ALU 연산 결과에 따른 플래그를 플래그 레지스터에 저장한다. 
- 플래그 레지스터는 연산 결과 또는 CPU 상태에 대한 부가적인 정보를 저장하는 레지스터이다. 


### 메모리에 저장된 프로그램이 실행되는 과정
- **프로그램 카운터 -> 메모리 주소 레지스터 -> 메모리 버퍼 레지스터 -> 명령어 레지스터**
1. CPU 로 실행할 프로그램이 메모리 1000번지부터 저장되어 있다고 가정한다. 
2. 프로그램을 처음부터 실행하기 위해서 프로그램 카운터에는 1000이 저장된다. 
3. 1000 번지를 읽기 위해서느 주소 버스로 1000 번지를 내보내야 하는데, 이를 위해 메모리 주소 레지스터에는 1000이 저장된다. 
	- 프로그램 카운터에서는 주소 값을 읽을 수 없기 때문에 메모리 주소 레지스터에 주소가 저장된다.
4. "메모리 읽기" 제어 신호와 메모리 주소 레지스터의 값이 각각 제어 버스와 주소 버스를 통해 메모리로 보내진다. 
5. 메모리 1000번지에 저장된 값은 데이터 버스를 통해 메모리 버퍼 레지스터로 전달되고, 프로그램 카운터는 증가되어 다음 명령어를 읽어 들일 준비를 한다. 
6. 메모리 버퍼 레지스터에 저장된 값은 명령어 레지스터로 이동한다.
7. 제어장치가 명령어 레지스터의 명령어를 해석하고 제어 신호를 발생시킨다.

## 특정 레지스터를 이용한 주소 지정 방식: 스택 주소 지정 방식
- 스택 포인터와 베이스 레지스터는 주소 지정에 사용될 수 있는 특별한 레지스터이다. 
- 스택 포인터는 스택 주소 지정 방식에서 사용되고, 프로그램 카운터와 베이스 레지스터는 변위 주소 지정 방식에서 사용된다. 
### 스택 주소 지정 방식
- 스택 포인터는 스택의 꼭대기를 가리키는 레지스터로 스택에 마지막으로 저장한 값의 위치를 저장하는 레지스터이다. 즉, 스택 포인터는 스택의 어디까지 데이터가 채워져 있는지에 대한 표시이다. 
- 스택은 메모리 안에 스택처럼 사용할 영역이 정해져 있다. 그리고 이것을 스택영역이라고 한다. 

## 특정 레지스터를 이용한 주소 지정 방식: 변위 주소 지정 방식
- 변위 주소 지정 방식은 **오퍼랜드 필드의 값(변위)과 특정 레지스터의 값을 더하여 유효 주소를 얻어내는** 주소 지정 방식이다. 
- 변위 주소 지정 방식을 사용하는 명령어는 연산 코드 필드 + 레지스터 필드(어떤 레지스터의 값과 더할지를 나타냄) + 주소를 담고 있는 오퍼랜드 필드가 있다. 
- 변위 주소 지정 방식은 **오퍼랜드 필드의 주소와 어떤 레지스터를 더하는지에 따라** 상대 주소 지정 방식, 베이스 레지스터 주소 지정 방식 등으로 나뉜다. 

### 상대 주소 지정 방식
- **오퍼랜드와 프로그램 카운터의 값을 더하여** 유효 주소를 얻는 방식이다. 
- 프로그램 카운터에는 명령어의 주소가 저장되어 있다. 예를 들어, 오퍼랜드가 -3 일 경우 CPU 는 명령어를 읽어 들일 때 **읽어 들이기로 한 명령어로부터 세 번째 이전 번지**로 접근한다.
- 상대 주소 지정 방식은 분기하여 특정 주소의 코드를 실행할 때 사용한다. 

### 베이스 레지스터 주소 지정 방식
- 오퍼랜드와 베이스 레지스터의 값을 더하여 유효 주소를 얻는 방식이다. 
- 베이스 레지스터는 기준 주소, 오퍼랜드는 기준 주소로부터 떨어진 거리의 역할을 한다. 베이스 레지스터 주소 지정 방식은 베이스 레지스터 속 기준 주소로부터 얼마나 떨어져 있는 주소에 접근할 것인지를 연산하여 유효주소를 얻어내는 방식이다. 
	- 베이스 레지스터에 200이라는 값이 있고 오퍼랜드가 40이라면 "기준 주소 200번지로부터 40만큼 떨어진 240번지로 접근하라"를 의미한다.
