# 10장 - 클래스

## 클래스 체계

클래스를 정의하는 표준 자바 관례에 따르면, 가장 먼저 변수 목록이 나온다. **정적 공개 상수가 있다면 맨 처음**에 나온다. public 변수가 필요한 경우는 거의 없다.

변수목록 다음에는 공개 함수가 나온다. 비공개 함수는 자신을 호출하는 공개 함수 직후에 넣는다. 다음으로 정적 비공개 변수가 나오며, 이어서 비공개 인스턴스 변수가 나온다.

추상화 단계가 순차적으로 내려가기 때문에 프로그램은 신문 기사처럼 읽힌다.

- 정적 공개 상수 → 변수 목록 → 공개 함수 → 비공개 함수 → 정적 비공개 변수 → 비공개 인스턴스 변수

### 캡슐화

변수와 유틸리티 함수는 가능한 공개하지 않는 편이 낫지만 반드시 숨겨야 한다는 법칙도 없다. 변수나 유틸리티 함수를 `protected` 로 선언해 테스트 코드에 접근을 허용하기도 한다.

캡슐화를 풀어주는 결정은 언제나 최후의 수단이어야 한다.

## 클래스는 작아야 한다

클래스를 만들 때 첫 번째 규칙은 크기이다. 함수와 마찬가지로 작게 만드는 것이 기본 규칙이다.

함수는 물리적인 행 수로 크기를 측정했다면 클래스는 **맡은 책임의 수**를 센다.

클래스 이름은 해당 클래스의 책임을 기술해야 한다. 만약 간결한 클래스 명이 떠오르지 않는다면 크기가 너무 커서(맡은 책임이 많아서) 그렇다.

또한 클래스 설명은 `if, and, or, but` 을 사용하지 않고 25 단어 내외로 가능해야 한다.

### 단일 책임 원칙(Single Responsibility Principle)

클래스나 모듈을 **변경할 이유는 단 하나**뿐이어야 한다는 원칙이다. 변경할 이유를 파악하려 애쓰다 보면 코드를 추상화하기도 쉬워진다.

소프트웨어를 돌아가게 만드는 활동과 소프트웨어를 깨끗하게 만드는 활동은 완전히 별개이다. 대부분은 “깨끗하고 체계적인 소프트웨어”보다 “돌아가는 소프트웨어”에 초점을 맞춘다. 문제는 “깨끗하고 체계적인 소프트웨어” 다음 관심사로 전환하지 않는 것이다.

큰 클래스 몇 개가 아니라 작은 클래스 여럿으로 이뤄진 시스템이 더 바람직하다. 작은 클래스는 각자 맡은 책임이 하나며, 변경할 이유가 하나며, 다른 작은 클래스와 협력해 시스템에 필요한 동작을 수행한다.

### 응집도(Cohesion)

클래스는 인스턴스 변수 개수가 적어야 한다. 모든 인스턴스 변수를 메서드마다 사용하는 클래스는 응집도가 가장 높다. 응집도가 높다는 것은 **클래스에 속한 메서드와 변수가 서로 의존하며 논리적인 단위로 묶인다는 의미**이다.

“함수를 작게, 매개변수 목록을 짧게” 라는 전략을 따르다보면 몇몇 메서드만이 사용하는 인스턴스 변수가 많아진다. 이는 새로운 클래스로 쪼개야 한다는 신호이다. 응집도가 높아지도록 변수와 메서드를 적절히 분리해 새로운 클래스 2, 3개로 쪼개줘야 한다.

### 응집도를 유지하면 작은 클래스 여럿이 나온다

큰 함수를 작은 함수 여럿으로 나누기만 해도 클래스 수가 많아진다. 그러면서 프로그램에 점점 더 체계가 잡히고 구조가 투명해진다.
