# 아이템44. 타입 커버리지를 추적하여 타입 안정성 유지하기

`nolmplicitAny` 옵션을 사용하고, 암묵적 any 대신 명시적 구문을 추가했어도 any 와 관련된 문제들로부터 안전하다고 할 수 없다. 이렇게 해도 any 타입이 프로그램 내에 존재할 수 있는 2 가지 경우가 있다.

### 명시적 any 타입

`any` 타입의 범위를 좁히고 구체화 한다고해도, 결국 여전히 `any` 타입이다. 특히 `any[]` 와 `{[key: string]: any}` 같은 타입은 생성하면 단순 `any` 되고, 코드 전반에 영향을 끼친다.

```tsx
const foo: {[key: string]: any} = {
  name: '1',
  key: 3,
}
const bar = foo.name;
bar; // type: any

const foo: any[] = [1, 4, 'foo'];
const bar = foo[0];
bar; // type: any
```

### 서드파티 타입 선언

이 경우네는 `@types` 선언 파일로부터 `any` 타입이 전파되기 때문에 특별히 조심해야 한다. `nolmplicitAny` 를 설정하고 `any` 를 사용하지 않더라도 `any` 타입은 여전히 영향을 미친다.

`any` 타입은 타입 안정성과 생산성에 부정적인 영향을 미칠 수 있기 때문에 `any` 타입은 추적하는 것이 좋다. npm 의 `type-coverage` 패키지를 통해 점수를 계산할 수 있다.

```
$ npx type-coverage
24221 / 24350 99.47%
```

만약 `any` 타입이 추가된다면 백분율이 줄어들게 된다. 점수를 추적함으로써 코드의 품질을 높일 수 있다.

`npx type-coverage --detail` 명령을 실행하면 `any` 타입이 있는 곳을 모두 출력해준다. 출력된 정보들을 조사해보면 `any` 의 근원지를 찾을 수도 있다.

이렇게 타입 커버리지를 추적하면 이러한 부분들을 쉽게 발견할 수 있기 때문에 코드를 꾸준히 점검할 수 있다.
