```java
public class OrderServiceImpl implements OrderService {   
    //private final DiscountPolicy discountPolicy = new FixDiscountPolicy();
    private final DiscountPolicy discountPolicy = new RateDiscountPolicy();
    //...
```

```java
public class FixDiscountPolicy implements DiscountPolicy {  
    private int discountFixAmount = 1000;  
  
    @Override  
    public int discount(Member member, int price) {  
        if (member.getGrade() == Grade.VIP) {  
            return discountFixAmount;  
        }  
        return 0;  
    }  
}

public class RateDiscountPolicy implements DiscountPolicy {  
  
    private int discountPercent = 10;  
    @Override  
    public int discount(Member member, int price) {  
        if (member.getGrade() == Grade.VIP) {  
            return price * discountPercent / 100;  
        }  
        return 0;  
    }  
}
```

만약 위의 코드에 할인 정책을 변경하려면(고정->비율) 클라이언트 객체에서 **주입된 객체를 직접 수정**해줘야 합니다.

1. 역할과 구현을 충실하게 분리했는가? -> OK
2. 다형성도 활용하고, 인터페이스와 구현 객체를 분리했는가? -> OK
3. OCP, DIP 같은 객체지향 설계원칙을 준수했는가? -> 그렇게 보일 수는 있지만 NO

현재 OrderServiceImpl 클래스는 **추상(인터페이스) 클래스 뿐만 아니라 구현 클래스에도 의존**을 하고 있다.    
따라서 DIP 를 위반하는 것이다.

이 문제를 해결하기 위해서는 인터페이스에만 의존하도록 변경하면 된다.

```java
private DiscountPolicy discountPolicy;
```
아무 값도 할당되어있지 않기 때문애 당연히 NullPointException 이 발생하게 된다.    
